package(default_visibility = ["//base:__subpackages__"])

load("//build:compiler.bzl", "CXXOPTS")

cc_library(
    name = "i18n",
    srcs = [
        "base_i18n_switches.cc",
        "bidi_line_iterator.cc",
        "break_iterator.cc",
        "case_conversion.cc",
        "char_iterator.cc",
        "character_encoding.cc",
        "encoding_detection.cc",
        "file_util_icu.cc",
        "i18n_constants.cc",
        "icu_string_conversions.cc",
        "icu_util.cc",
        "message_formatter.cc",
        "number_formatting.cc",
        "rtl.cc",
        "streaming_utf8_validator.cc",
        "string_compare.cc",
        "string_search.cc",
        "time_formatting.cc",
        "timezone.cc",
        "utf8_validator_tables.cc",
    ],
    hdrs = [
        "base_i18n_export.h",
        "base_i18n_switches.h",
        "bidi_line_iterator.h",
        "break_iterator.h",
        "case_conversion.h",
        "char_iterator.h",
        "character_encoding.h",
        "encoding_detection.h",
        "file_util_icu.h",
        "i18n_constants.h",
        "icu_string_conversions.h",
        "icu_util.h",
        "message_formatter.h",
        "number_formatting.h",
        "rtl.h",
        "streaming_utf8_validator.h",
        "string_compare.h",
        "string_search.h",
        "time_formatting.h",
        "timezone.h",
        "unicodestring.h",
        "utf8_validator_tables.h",
    ],
    copts = CXXOPTS,
    defines = [
        "BASE_I18N_IMPLEMENTATION",
    ],
    linkstatic = True,
    visibility = ["//visibility:public"],
    deps = [
        "//base",
        "//build:build_config",
        "//third_party/ced",
        "//third_party/icu:icui18n",
        "//third_party/icu:icuuc",
    ],
)

cc_test(
    name = "unit_test",
    testonly = True,
    srcs = [
        "bidi_line_iterator_unittest.cc",
        "break_iterator_unittest.cc",
        "case_conversion_unittest.cc",
        "char_iterator_unittest.cc",
        "character_encoding_unittest.cc",
        "file_util_icu_unittest.cc",
        "icu_string_conversions_unittest.cc",
        "message_formatter_unittest.cc",
        "number_formatting_unittest.cc",
        "rtl_unittest.cc",
        "streaming_utf8_validator_unittest.cc",
        "string_search_unittest.cc",
        "time_formatting_unittest.cc",
        "timezone_unittest.cc",
    ],
    copts = CXXOPTS,
    deps = [
        ":i18n",
        "//base",
        "//base/test:test_support",
        "//build:build_config",
        "//testing",
    ],
)
