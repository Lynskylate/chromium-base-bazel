package(default_visibility = ["//visibility:public"])

load("//build:compiler.bzl", "COPTS")

cc_library(
    name = "libxml",
    srcs = [
        "chromium/libxml_utils.cc",
        "src/HTMLparser.c",
        "src/HTMLtree.c",
        "src/SAX2.c",
        "src/buf.c",
        "src/chvalid.c",
        "src/dict.c",
        "src/encoding.c",
        "src/entities.c",
        "src/error.c",
        "src/globals.c",
        "src/hash.c",
        "src/list.c",
        "src/parser.c",
        "src/parserInternals.c",
        "src/pattern.c",
        "src/threads.c",
        "src/tree.c",
        "src/uri.c",
        "src/valid.c",
        "src/xmlIO.c",
        "src/xmlmemory.c",
        "src/xmlreader.c",
        "src/xmlsave.c",
        "src/xmlstring.c",
        "src/xmlunicode.c",
        "src/xmlwriter.c",
        "src/xpath.c",
    ],
    hdrs = [
        "chromium/libxml_utils.h",
        "linux/config.h",
        "linux/include/libxml/xmlversion.h",
        "src/buf.h",
        "src/elfgcchack.h",
        "src/enc.h",
        "src/include/libxml/DOCBparser.h",
        "src/include/libxml/HTMLparser.h",
        "src/include/libxml/HTMLtree.h",
        "src/include/libxml/SAX.h",
        "src/include/libxml/SAX2.h",
        "src/include/libxml/c14n.h",
        "src/include/libxml/catalog.h",
        "src/include/libxml/chvalid.h",
        "src/include/libxml/debugXML.h",
        "src/include/libxml/dict.h",
        "src/include/libxml/encoding.h",
        "src/include/libxml/entities.h",
        "src/include/libxml/globals.h",
        "src/include/libxml/hash.h",
        "src/include/libxml/list.h",
        "src/include/libxml/nanoftp.h",
        "src/include/libxml/nanohttp.h",
        "src/include/libxml/parser.h",
        "src/include/libxml/parserInternals.h",
        "src/include/libxml/pattern.h",
        "src/include/libxml/relaxng.h",
        "src/include/libxml/schemasInternals.h",
        "src/include/libxml/schematron.h",
        "src/include/libxml/threads.h",
        "src/include/libxml/tree.h",
        "src/include/libxml/uri.h",
        "src/include/libxml/valid.h",
        "src/include/libxml/xinclude.h",
        "src/include/libxml/xlink.h",
        "src/include/libxml/xmlIO.h",
        "src/include/libxml/xmlautomata.h",
        "src/include/libxml/xmlerror.h",
        "src/include/libxml/xmlexports.h",
        "src/include/libxml/xmlmemory.h",
        "src/include/libxml/xmlmodule.h",
        "src/include/libxml/xmlreader.h",
        "src/include/libxml/xmlregexp.h",
        "src/include/libxml/xmlsave.h",
        "src/include/libxml/xmlschemas.h",
        "src/include/libxml/xmlschemastypes.h",
        "src/include/libxml/xmlstring.h",
        "src/include/libxml/xmlunicode.h",
        "src/include/libxml/xmlwriter.h",
        "src/include/libxml/xpath.h",
        "src/include/libxml/xpathInternals.h",
        "src/include/libxml/xpointer.h",
        "src/libxml.h",
        "src/save.h",
        "src/timsort.h",
        "src/triodef.h",
        "src/trionan.h",
        "src/xzlib.h",
    ],
    copts = COPTS + ["-Wno-format-extra-args"],
    defines = [
        "_REENTRANT",
        "LIBXML_STATIC=",
        "UCHAR_TYPE=uint16_t",
    ],
    includes = [
        "linux",
        "linux/include",
        "src/include",
    ],
    licenses = ["permissive"],
    linkstatic = True,
    deps = [
        "//third_party/icu:icuuc",
        "//third_party/zlib",
    ],
)
